<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Student Hub</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#020617">

<style>
*{box-sizing:border-box;margin:0;padding:0}

body{
  min-height:100vh;
  font-family:Segoe UI,system-ui,sans-serif;
  color:white;
  background:
    radial-gradient(circle at top, rgba(56,189,248,0.15), transparent 40%),
    linear-gradient(180deg,#020617,#020617);
  display:flex;
  justify-content:center;
  align-items:center;
  transition:.4s;
}
body.light{
  color:#020617;
  background:linear-gradient(180deg,#f8fafc,#e5e7eb);
}

.app{
  width:380px;
  padding:28px;
  border-radius:28px;
  background:rgba(255,255,255,.12);
  backdrop-filter:blur(20px);
  box-shadow:0 30px 80px rgba(0,0,0,.6);
  animation:appear .8s ease;
}
@keyframes appear{
  from{opacity:0;transform:translateY(40px)}
  to{opacity:1;transform:none}
}

header{text-align:center;margin-bottom:25px}
header h1{font-size:2em}
header p{opacity:.8}

section{margin-top:25px}
section h2{margin-bottom:10px}

input,select{
  width:100%;
  padding:12px;
  border-radius:14px;
  border:none;
  margin-bottom:8px;
}

button{
  width:100%;
  padding:12px;
  border-radius:14px;
  border:none;
  font-weight:bold;
  background:linear-gradient(135deg,#38bdf8,#818cf8);
  cursor:pointer;
}

ul{list-style:none}
li{
  background:rgba(0,0,0,.35);
  padding:14px;
  margin-bottom:8px;
  border-radius:14px;
  cursor:pointer;
  transition:.15s;
}
li:hover{transform:scale(1.04)}

.stats{
  margin-top:10px;
  background:rgba(0,0,0,.25);
  padding:12px;
  border-radius:14px;
}

.theme-btn{
  position:fixed;
  top:16px;
  right:16px;
  width:44px;
  height:44px;
  border-radius:50%;
  border:none;
  background:rgba(255,255,255,.25);
  font-size:18px;
}
</style>
</head>

<body>

<button class="theme-btn" onclick="toggleTheme()">üåô</button>

<div class="app">

<header>
  <h1>üéì Student Hub</h1>
  <p>Organisation & Moyennes</p>
</header>

<!-- TODO -->
<section>
<h2>üìù T√¢ches</h2>
<input id="taskInput" placeholder="Nouvelle t√¢che">
<button onclick="addTask()">Ajouter</button>
<ul id="tasks"></ul>
</section>

<!-- SUBJECTS -->
<section>
<h2>üìö Mati√®res</h2>
<input id="subjectInput" placeholder="Nouvelle mati√®re">
<button onclick="addSubject()">Ajouter mati√®re</button>
<div id="subjects"></div>

<div class="stats">
  <p>üìä Moyenne g√©n√©rale : <strong><span id="globalAvg">-</span></strong></p>
</div>
</section>

</div>

<script>
/* ===== STORAGE ===== */
let tasks = JSON.parse(localStorage.getItem("tasks")) || [];
let subjects = JSON.parse(localStorage.getItem("subjects")) || [];

/* ===== TASKS ===== */
const taskList = document.getElementById("tasks");
tasks.forEach(t=>createTask(t));

function addTask(){
  let i=document.getElementById("taskInput");
  if(!i.value)return;
  tasks.push(i.value);
  save();
  createTask(i.value);
  i.value="";
}
function createTask(text){
  let li=document.createElement("li");
  li.textContent="‚úÖ "+text;
  li.onclick=()=>{tasks=tasks.filter(t=>t!==text);save();li.remove()}
  taskList.appendChild(li);
}

/* ===== SUBJECTS ===== */
const subjectBox=document.getElementById("subjects");
subjects.forEach(s=>renderSubject(s));
updateGlobal();

function addSubject(){
  let i=document.getElementById("subjectInput");
  if(!i.value)return;
  subjects.push({name:i.value,notes:[]});
  save();
  renderSubject(subjects.at(-1));
  i.value="";
}

function renderSubject(s){
  let div=document.createElement("div");
  div.className="stats";

  div.innerHTML=`
    <strong>${s.name}</strong>
    <input type="number" min="1" max="6" placeholder="Note (1-6)">
    <button>Ajouter note</button>
    <ul></ul>
    <p>Moyenne : <span>-</span></p>
  `;

  const input=div.querySelector("input");
  const ul=div.querySelector("ul");
  const avgSpan=div.querySelector("span");

  s.notes.forEach(n=>addNoteLi(n));

  div.querySelector("button").onclick=()=>{
    let n=Number(input.value);
    if(n<1||n>6)return;
    s.notes.push(n);
    save();
    addNoteLi(n);
    updateAvg();
    updateGlobal();
    input.value="";
  };

  function addNoteLi(n){
    let li=document.createElement("li");
    li.textContent=n;
    li.onclick=()=>{
      s.notes=s.notes.filter(x=>x!==n);
      save();
      li.remove();
      updateAvg();
      updateGlobal();
    };
    ul.appendChild(li);
  }

  function updateAvg(){
    if(!s.notes.length){avgSpan.textContent="-";return;}
    avgSpan.textContent=(s.notes.reduce((a,b)=>a+b)/s.notes.length).toFixed(2);
  }
  updateAvg();
  subjectBox.appendChild(div);
}

function updateGlobal(){
  let all=[];
  subjects.forEach(s=>all.push(...s.notes));
  document.getElementById("globalAvg").textContent=
    all.length?(all.reduce((a,b)=>a+b)/all.length).toFixed(2):"-";
}

/* ===== THEME ===== */
function toggleTheme(){
  document.body.classList.toggle("light");
  localStorage.setItem("theme",document.body.classList.contains("light")?"light":"dark");
}
if(localStorage.getItem("theme")==="light")document.body.classList.add("light");

/* ===== SAVE ===== */
function save(){
  localStorage.setItem("tasks",JSON.stringify(tasks));
  localStorage.setItem("subjects",JSON.stringify(subjects));
}

/* ===== PWA ===== */
if("serviceWorker"in navigator){navigator.serviceWorker.register("sw.js")}
</script>

</body>
</html>






















